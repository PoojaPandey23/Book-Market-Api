(this["webpackJsonpreact-book-market-api"]=this["webpackJsonpreact-book-market-api"]||[]).push([[0],{10:function(e,t,n){e.exports={book:"BookItem_book__2Bxor",price:"BookItem_price__1G49V"}},11:function(e,t,n){e.exports={header:"Header_header__3E3lC","main-image":"Header_main-image__3Dc8Z"}},20:function(e,t,n){e.exports={card:"Card_card__2VA7j"}},21:function(e,t,n){e.exports={books:"AvailableBooks_books__1rNmf","books-appear":"AvailableBooks_books-appear__21khV"}},22:function(e,t,n){e.exports={input:"Input_input__lXP5Z"}},23:function(e,t,n){e.exports={form:"BookItemForm_form__1E10m"}},24:function(e,t,n){e.exports={summary:"BooksSummary_summary__2sDrs"}},30:function(e,t,n){},4:function(e,t,n){e.exports={"cart-items":"Cart_cart-items__2vWaC",total:"Cart_total__XD3wj",actions:"Cart_actions__8Q9sP","button--alt":"Cart_button--alt__3Vjss",button:"Cart_button__3ppTE"}},5:function(e,t,n){e.exports={"cart-item":"CartItem_cart-item__2xQ1z",summary:"CartItem_summary__h5elC",price:"CartItem_price__1YKSg",amount:"CartItem_amount__2Si58",actions:"CartItem_actions__VDidh"}},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),o=n(6),r=n.n(o),i=(n(30),n(3)),s=n(20),l=n.n(s),d=n(0),u=function(e){return Object(d.jsx)("div",{className:l.a.card,children:e.children})},j=n(21),b=n.n(j),m=n(10),h=n.n(m),x=n(25),O=n(22),_=n.n(O),p=a.a.forwardRef((function(e,t){return Object(d.jsxs)("div",{className:_.a.input,children:[Object(d.jsx)("label",{htmlFor:e.input.id,children:e.label}),Object(d.jsx)("input",Object(x.a)({ref:t},e.input))]})})),f=n(23),v=n.n(f),k=function(e){var t=Object(c.useState)(!0),n=Object(i.a)(t,2),a=n[0],o=n[1],r=Object(c.useRef)();return Object(d.jsxs)("form",{className:v.a.form,onSubmit:function(t){t.preventDefault();var n=r.current.value,c=+n;0===n.trim().length||c<1||c>5?o(!1):e.onAddToCart(c)},children:[Object(d.jsx)(p,{ref:r,label:"Amount",input:{id:"amount_"+e.id,type:"number",min:"1",max:"5",step:"1",defaultValue:"1"}}),Object(d.jsx)("button",{children:"+ Add"}),!a&&Object(d.jsx)("p",{children:"Please enter a valid amount (1-5)"})]})},C=a.a.createContext({items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){}}),g=function(e){var t=Object(c.useContext)(C),n="Rs.".concat(e.price*118.83.toFixed(2));return Object(d.jsxs)("li",{className:h.a.book,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:e.name}),Object(d.jsx)("div",{children:e.image}),Object(d.jsx)("div",{className:h.a.price,children:n}),Object(d.jsx)("div",{children:e.stock}),Object(d.jsx)("div",{children:e.author}),Object(d.jsx)("div",{children:e.genre}),Object(d.jsx)("div",{children:e.published_date})]}),Object(d.jsx)("div",{children:Object(d.jsx)(k,{onAddToCart:function(n){t.addItem({id:e.id,name:e.name,price:e.price})}})})]})},N=(n(32),function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],o=n.map((function(e){return Object(d.jsx)(g,{id:e.id,name:e["name "],image:e.image,price:e.price,stock:e.stock,author:e.author,genre:e.genre,published_date:e.published_date},e.id)}));return Object(c.useEffect)((function(){fetch("https://book-set-task.herokuapp.com/api/list_books").then((function(e){return e.json()})).then((function(e){a(e)}))}),[]),Object(d.jsx)("div",{children:Object(d.jsx)("section",{className:b.a.books,children:Object(d.jsx)(u,{children:Object(d.jsx)("ul",{children:o})})})})}),A=n(24),y=n.n(A),I=function(){return Object(d.jsxs)("section",{className:y.a.summary,children:[Object(d.jsx)("h2",{children:"Amazing Books, Delivered To You"}),Object(d.jsx)("p",{children:"Choose your favorite book from our broad selection of available books and enjoy a good read at home."}),Object(d.jsx)("p",{children:"All our books are with high quality and by famous writers!"})]})},B=function(){return Object(d.jsxs)(c.Fragment,{children:[Object(d.jsx)(I,{}),Object(d.jsx)(N,{})]})},w=n(4),F=n.n(w),S=n(7),D=n.n(S),E=function(e){return Object(d.jsx)("div",{className:D.a.backdrop,onClick:e.onClose})},H=function(e){return Object(d.jsx)("div",{className:D.a.modal,children:Object(d.jsx)("div",{className:D.a.content,children:e.children})})},M=document.getElementById("overlays"),V=function(e){return Object(d.jsxs)(c.Fragment,{children:[r.a.createPortal(Object(d.jsx)(E,{onClose:e.onClose}),M),r.a.createPortal(Object(d.jsx)(H,{children:e.children}),M)]})},P=n(5),R=n.n(P),T=function(e){var t="$".concat(e.price);return Object(d.jsxs)("li",{className:R.a["cart-item"],children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:e.name}),Object(d.jsxs)("div",{className:R.a.summary,children:[Object(d.jsx)("span",{className:R.a.price,children:t}),Object(d.jsxs)("span",{className:R.a.amount,children:["x ",e.amount]})]})]}),Object(d.jsxs)("div",{className:R.a.actions,children:[Object(d.jsx)("button",{onClick:e.onRemove,children:"\u2212"}),Object(d.jsx)("button",{onClick:e.onAdd,children:"+"})]})]})},z=function(e){var t=Object(c.useContext)(C),n="$".concat(t.totalAmount.toFixed(2)),a=t.items.length>0,o=function(e){},r=function(e){},i=Object(d.jsx)("ul",{className:F.a["cart-items"],children:t.items.map((function(e){return Object(d.jsx)(T,{name:e.name,amount:e.amount,price:e.price,onRemove:o.bind(null,e.id),onAdd:r.bind(null,e)},e.id)}))});return Object(d.jsxs)(V,{children:[i,Object(d.jsxs)("div",{className:F.a.total,children:[Object(d.jsx)("span",{children:"Total Amount"}),Object(d.jsx)("span",{children:n})]}),Object(d.jsxs)("div",{className:F.a.actions,children:[Object(d.jsx)("button",{className:F.a["button--alt"],onClick:e.onClose,children:"Cancel"}),a&&Object(d.jsx)("button",{className:F.a.button,children:"Order"})]})]})},X=n.p+"static/media/books.52f56774.png",G=n(11),L=n.n(G),Y=function(){return Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(d.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},J=n(8),Q=n.n(J),Z=function(e){var t=Object(c.useContext)(C).items.reduce((function(e,t){return e+t.amount}),0);return Object(d.jsxs)("button",{className:Q.a.button,onClick:e.onClick,children:[Object(d.jsx)("span",{className:Q.a.icon,children:Object(d.jsx)(Y,{})}),Object(d.jsx)("span",{children:"Your Cart"}),Object(d.jsx)("span",{className:Q.a.badge,children:t})]})},$=function(e){return Object(d.jsxs)(c.Fragment,{children:[Object(d.jsxs)("header",{className:L.a.header,children:[Object(d.jsx)("h1",{children:"Book Market"}),Object(d.jsx)(Z,{onClick:e.onShowCart})]}),Object(d.jsx)("div",{className:L.a["main-image"],children:Object(d.jsx)("img",{src:X,alt:"Library of books"})})]})},q={items:[],totalAmount:0},K=function(e,t){if("ADD"===t.type)return{items:e.items.concat(t.item),totalAmount:e.totalAmount+t.item.price*t.item.amount};if("REMOVE"===t.type)e.items.findIndex();return q},W=function(e){var t=Object(c.useReducer)(K,q),n=Object(i.a)(t,2),a=n[0],o=n[1],r={items:a.items,totalAmount:a.totalAmount,addItem:function(e){o({type:"ADD",item:e})},removeItem:function(e){o({type:"REMOVE",id:e})}};return Object(d.jsx)(C.Provider,{value:r,children:e.children})};n(51);var U=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(d.jsxs)(W,{children:[n&&Object(d.jsx)(z,{onClose:function(){a(!1)}}),Object(d.jsx)($,{onShowCart:function(){a(!0)}}),Object(d.jsx)(B,{})]})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),o(e),r(e)}))};r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(U,{})}),document.getElementById("root")),ee()},7:function(e,t,n){e.exports={backdrop:"Modal_backdrop__1_IFS",modal:"Modal_modal__XwEb4","slide-down":"Modal_slide-down__3nAGA"}},8:function(e,t,n){e.exports={button:"HeaderCartButton_button__VoGA2",icon:"HeaderCartButton_icon__2L8dI",badge:"HeaderCartButton_badge__dxGTz",bump:"HeaderCartButton_bump__NJXXY"}}},[[52,1,2]]]);
//# sourceMappingURL=main.d85f17fc.chunk.js.map